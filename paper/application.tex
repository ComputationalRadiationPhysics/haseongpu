\section{Application}
\numberwithin{equation}{section}

The application is available as a commandline-tool and reads
its simulation data from plain text files. 
For an easy access the offered MATLAB interface (see \ref{label:matlab_interface}) 
is highly recommended. Experienced users can also call the application
directly. Please consult the README file, the provided 
example code or the source code for more details.\\
\textbf{TODO:}~octave interface ?

\subsection{Installation}
The application was tested and developed under a linux environment.
It can be built by running make inside the application directory, provided
that make (tested with 3.82), gcc (up to 4.6.2) and cuda (5.0) are installed. 
This will also setup a MATLAB file calcPhiASE.m in the application
directory. The device code runs on Nvidia graphics cards with 
capability 2.0 (fermi generation) or higher. 

\subsection{MATLAB interface}
\label{label:matlab_interface}
Because MATLAB is widely used in academic and research institutions, a MATLAB
interface is provided. To run the application from MATLAB, two steps are
necessary in advance:
\begin{enumerate}
  \item Include calcPhiASE.me from the application directory into your MATLAB path
  \item Call calcPhiASE function from the MATLAB script
\end{enumerate}

\subsubsection{Usage}
In \ref{label:input}, a brief overview about the
arguments of the calcPhisAse function can be found. See the README file for 
more interface details. Otherwise it is just a function call from
a MATLAB script:
\[[phiASE,~MSE,~nRays] = calcPhiASE(args)\]
\textbf{TODO}: Need Feature section?
%%\subsection{Features}
%%\begin{itemize}
%%  \item polychromatic (multiple wavelengths)
%%  \item reflections on top and bottom of amplifying medium
%%  \item variable + adaptive number of rays per sample point
%%  \item multigpu on one computation node
%%  \item threshold for MSE
%%  \item creation of VTK files containing $\Phi_{ASE}$, reflections per prism etc.
%%  \item comparison with existing VTK files 
%% \end{itemize}

\subsubsection{Input Arguments}
Mesh information needs to be generated in advance
to save calculation time, because usually $\Phi$-ASE calculations
run over several timesteps on the same mesh. Thus the following
data need to be provided by the MATLAB script:
\label{label:input}
\tablehead{\hline \textbf{Argument} & \textbf{Description} \\\hline \hline}
\begin{flushleft}
\begin{supertabular}{| p{3cm} | p{4cm} |}
  triangle points & Sample points of the mesh \\\hline
  prism side normals & Normal vectors of prism(triangle) sides\\\hline
  triangle neigbor relation & Adjacent edges of neighbor triangles\\\hline
  triangle center points & Center points of the triangles\\\hline
  thickness & Thickness of one mesh level \\\hline
  number of slices & Total number of slices of the medium \\\hline
  triangleSurfaces & Surfaces of triangles \\\hline
  \hline
  nTot & \textbf{TODO} Some constant \\\hline
  betaVol & \textbf{TODO} Some constant for each sample points \\\hline
  crystal & \textbf{TODO} Crystalparameters \\\hline
  prismBetaValues & \textbf{TODO} Some constant for every prism of the mesh \\\hline
  cladding & cladNum, cladAbs \\\hline
  \hline
  laserWavelength & $\sigma_a$, $\sigma_e$ \\\hline
  \hline
  refractiveIndices &  Refractive index of mesh and volume around \\\hline
  reflectivities & Reflectivities of mesh planes bottom and top \\\hline
  \hline
  maxRays & Maximal number of rays for adaptive sampling \\\hline
  MSEThreshold & MSE-threshold for adaptive sampling \\\hline
  useReflections & Switch to activate reflections \\\hline
\end{supertabular}


\subsubsection{Output}
\tablehead{\hline \textbf{Output} & \textbf{Description} \\\hline \hline}
\begin{supertabular}{| p{3cm} | p{4cm} |}
  \hline
  phiASE & solution of simulation for each sample point \\\hline
  MSE & Mean squared error for each sample point \\\hline
  nRays & number of rays per sample point \\\hline
\end{supertabular}
\end{flushleft}
